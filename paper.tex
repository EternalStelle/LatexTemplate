\documentclass[fontset=windows, UTF8, zihao=-4,AutoFakeBold=true, twoside]{ctexart}
\usepackage{geometry}
\geometry{a4paper, left=3cm, right=2.5cm, top=3cm, bottom=2.5cm}

% 通用宏包
\usepackage{graphicx}  % 插入图片
\usepackage{float}  % 图片位置控制
\usepackage{hyperref}  % 超链接
\usepackage[runin]{abstract}  % 摘要
\usepackage{fancyhdr}  % 页眉页脚
\usepackage{titletoc}  % 目录
\usepackage{ragged2e}  % 提供更灵活的对齐控制
\usepackage{enumerate}  % 自定义列表
\graphicspath{{figs}} % 图片路径
\usepackage{caption}  % 图表标题格式
\captionsetup{font={small}}
\usepackage{tabularx}  % 表格

% 数学字体配置
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{unicode-math}
\setmainfont{Times New Roman}
\setmathfont{Latin Modern Math}  % 数学字体设置

% 参考文献设置
\usepackage[style=gb7714-2015, backend=biber]{biblatex}
\addbibresource{references.bib}  % 创建参考文献数据库文件
\DeclareFieldFormat[book]{translator}{\mkbibparens{\bibstring{translatedby} #1}}

% 中英标题
\renewcommand{\title}[1]{\centering{\Large{#1}}}
\newcommand{\entitle}[1]{\centering{\Large{#1}}}

% 关键词命令
\newcommand{\ckeywords}[1]{\par\noindent\textbf{关键词：}#1}
\newcommand{\ekeywords}[1]{\par\noindent\textbf{Keywords: }#1}

% 自定义标题
\ctexset{
    section = {
        format      = \zihao{4}\raggedright,  % 左对齐
        name        = {,},                          % 标题编号后符号（例如 "1.1."）
        aftername   = \ ,                           % 编号和标题之间的空格
        beforeskip  = 1.0ex plus 0.2ex minus 0.2ex, % 标题前间距
        afterskip   = 1.0ex plus 0.2ex minus 0.2ex, % 标题后间距
        indent      = 0pt,                          % 标题缩进
    },
    subsection = {
        format      = \zihao{4}\raggedright,
        name        = {,},
        aftername   = \ ,
        beforeskip  = 1.0ex plus 0.2ex minus 0.2ex,
        afterskip   = 1.0ex plus 0.2ex minus 0.2ex,
        indent      = 0pt,
    },
    subsubsection = {
        format      = \zihao{-4}\raggedright,
        name        = {,},
        aftername   = \ ,
        beforeskip  = 1.0ex plus 0.2ex minus 0.2ex,
        afterskip   = 1.0ex plus 0.2ex minus 0.2ex,
        indent      = 0pt,
    }
}

% 自定义中文摘要
\renewcommand{\abstractnamefont}{\zihao{-4}\bfseries\songti} % 摘要两字的字体
\renewcommand{\abstracttextfont}{\zihao{-4}\songti} % 摘要内容的字体
\setlength{\absleftindent}{0pt} % 摘要左缩进
\setlength{\absrightindent}{0pt} % 摘要右缩进
\setlength{\abstitleskip}{-2em} % 摘要标题与正文的距离
\abslabeldelim{：} % 摘要标题后冒号
% 自定义英文摘要（继承中文摘要）
\newenvironment{enabstract}{%
  \renewcommand{\abstractname}{Abstract}  % 修改标题为英文
  \abslabeldelim{: } % 摘要标题后冒号
  \begin{abstract}                        % 继承原有abstract格式
}{%
  \end{abstract}
}

% 页眉页脚设置
\pagestyle{fancy}
\fancyhf{}  % 清空默认页眉页脚
\renewcommand{\headrulewidth}{0.4pt}  % 页眉横线宽度
\renewcommand{\footrulewidth}{0pt}  % 页脚横线宽度
\fancyhead[C]{标题}  % 页眉中间显示标题
\fancyfoot[LE,RO]{\thepage}  % 页脚设置左右页码，并设置twoside

% 目录设置
\renewcommand{\contentsname}{\large{目录}}
\titlecontents{section}[0pt]          % 一级标题
  {\addvspace{6pt}\songti\zihao{-4}} % 全局格式
  {\contentslabel{2em}}               % 带编号的标签（缩进1字符）
  {\hspace*{-2em}}                   % 无编号时的缩进
  {\titlerule*[0.5em]{.}\contentspage} % 引导线 + 页码
\titlecontents{subsection}[2em]      % 二级标题（缩进2字符）
  {\addvspace{3pt}\songti\zihao{-4}}
  {\contentslabel{2em}}
  {}
  {\titlerule*[0.5em]{.}\contentspage}
\titlecontents{subsubsection}[4em]      % 三级标题（缩进4字符）
  {\addvspace{3pt}\songti\zihao{-4}}
  {\contentslabel{2em}}
  {}
  {\titlerule*[0.5em]{.}\contentspage}

% -----文章正式开始 -----
\begin{document}

\title{中文标题}
% 中文摘要
\begin{abstract}
  \emergencystretch=2em 
  \ckeywords{关键词}
\end{abstract}

\entitle{English Title}
% 英文摘要
\begin{enabstract}
  \ekeywords{Keywords}
\end{enabstract}
\newpage
\tableofcontents
\newpage
\justifying % 使正文两端对齐
\emergencystretch=2em % 设置文本的紧急伸展量，避免单词过长导致的换行问题
\section{引言}
\subsection{背景}
\subsubsection{研究背景}

\section{相关工作}
残差网络（ResNet）通过引入跳跃连接有效解决了深度网络训练难题\upcite{He2016}。给定输入$x$，残差块可表示为：
\begin{equation}
  y = \mathcal{F}(x, \{W_i\}) + x
\end{equation}

\section{实验与结果}
我们在CIFAR-10数据集上评估了模型性能，实验结果如表所示。
\begin{tabularx}{0.8\textwidth}{|X|X|X|}
  \hline
  \textbf{模型} & \textbf{准确率} & \textbf{参数量} \\ \hline
  ResNet-20 & 91.25\% & 0.27M \\ \hline
  ResNet-56 & 93.45\% & 0.85M \\ \hline
\end{tabularx}

\printbibliography[heading=bibintoc, title=参考文献]

\end{document}
